# Java面向对象编程

## 学习目标

- [ ] 理解什么是面向对象的思想，理解OOP
- [ ] 掌握OOP的重要该概念
- [ ] 全面掌握类、抽象类、内部类、接口、枚举，熟悉其区别
- [ ] this、super、final、static等关键字作用，及使用场景
- [ ] 可深入学习`JVM`相关知识，了解 Java 底层原理和逻辑
- [ ] 封装、继承、多态场景及使用

## 一 面向对象思想

Java语言是一种面向对象的程序设计语言，而面向对象思想是一种程序设计思想，我们在面向对象思想的指引下，
使用Java语言去设计、开发计算机程序。 这里的对象泛指现实中一切事物，每种事物都具备自己的属性和行为。面向对象思想就是在计算机程序设计过程中，参照现实中事物，将事物的属性特征、行为特征抽象出来，描述成计算机事件的设计思想。 它区别于面向过程思想，强调的是通过调用对象的行为来实现功能，而不是自己一步一步的去操作实现。

### 1.1 基本概念

- **封装**： 隐藏类的属性和方法，提供公有的set/get方法，对外提供统一的方法进行调用，提高了代码的内聚程度，降低了耦合

- **继承** ：继承是一种实现代码复用的方式，子类继承父类的属性和方法，从而实现代码对复用。(1、不能继承父类的构造方法和私有方法 2、Java支持单继承 3、继承的逻辑关系：is a 的关系 4、继承是一种重量级的代码复用方式，更多的时候使用合成的方式实现代码的复用)

- **多态** - 同一事物表现出来的多种形态，方法的多态（重写和重载）引用的多态（父类的引用指向子类的对象）

- **抽象** - 是指将事物的共有特性提取出来的抽象描述

- **重写**（override） -  发生在父子类之间，子类重写父类的方法。方法重写的原则 ：1、要求方法名相同、返回值类型相同、参数列表相同 2、访问权限不能变小 3、不能抛出更大的异常

- **重载**（overload） -  方法名相同，参数列表不同的多个构造方法之间构成重载关系，包括参数类型不同，参数个数不同

### 1.2 类和对象

- **类** ：是一组相关属性和行为的集合。可以看成是一类事物的模板，使用事物的属性特征和行为特征来描述该类事物。
  - **属性** ：就是该事物的状态信息。
  - **行为** ：就是该事物能够做什么。
- **对象** ：是一类事物的具体体现。对象是类的一个实例（对象并不是找个女朋友），必然具备该类事物的属性和行为。

#### 1.2.1 类与对象的关系

- 类是对一类事物的描述，是 抽象的。
- 对象是一类事物的实例，是 具体的。
- 类是对象的模板，对象是类的实体 。

#### 1.2.2 访问控制符

| 访问控制符 | 访问权限 | 本类 | 本包中的类 | 子类 | 其它包的类 |
| :--------- | :------- | :--- | :--------- | :--- | :--------: |
| public     | 公有的   | Y    | Y          | Y    |     Y      |
| protected  | 保护的   | Y    | Y          | Y    |     N      |
| 空         | 默认的   | Y    | Y          | N    |     N      |
| private    | 私有的   | Y    | N          | N    |     N      |

#### 1.2.3 类定义的语法格式

```java
public class Phone {
    // 成员变量
    String brand;//访问控制符 数据类型 成员变量名组成
    int price;
    String color;

    // 成员方法，组成如下
    public void call(String name) {//访问权限控制符、返回值类型、方法名、形参列表组成
        System.out.println("给" + name + "打电话");//语句块
    }

    public void sendMessage() {
        System.out.println("群发短信");
    }
}
```

> 一个`.java`文件可以包含多个`java`类，但是只能包含一个public修饰的类，并且该类名与文件名同名。

#### 1.2.3 构造函数

当一个对象被创建时候，构造方法用来初始化该对象，给对象的成员变量赋初始值。

- 构造函数没有返回值类型，甚至void也不需要。
- 构造方法名和类名同名
- 如果没有构造方法，系统会给出无参数构造方法。
- 多个构造函数之间构成重载关系（overlord）

#### 1.2.4 成员变量默认值

|          | 数据类型                       | 默认值   |
| -------- | ------------------------------ | -------- |
| 基本类型 | 整数（byte，short，int，long） | 0        |
|          | 浮点数（float，double）        | 0.0      |
|          | 字符（char）                   | '\u0000' |
|          | 布尔（boolean）                | false    |
| 引用类型 | 数组，类，接口                 | null     |

#### 1.2.5 成员变量和局部变量

- 在类中位置不同
  - 成员变量：类中，方法外
  - 局部变量：方法中或者方法声明上 (形式参数)
- 作用范围不一样
  - 成员变量：类中
  - 局部变量：方法中
- 初始化值的不同
  - 成员变量：有默认值
  - 局部变量：没有默认值。必须先定义，赋值，最后使用
- 在内存中的位置不同
  - 成员变量：堆内存
  - 局部变量：栈内存
- 生命周期不同
  - 成员变量：随着对象的创建而存在，随着对象的消失而消失
  - 局部变量：随着方法的调用而存在，随着方法的调用完毕而消失

#### 1.2.6 代码块

- 普通代码块：是在方法中定义的
- 构造代码块：定义在类中
- 静态代码块：是由static修饰的，静态代码块不能放在方法中

**执行顺序**：静态代码块>构造代码块>构造方法>普通代码块　

### 1.3 对象的使用

- 对象的创建

  - 匿名对象创建

    ```
    new 类名();
    ```

  ```
  类名 对象名 = new 类名();
  ```

- **引用**

  ```
  类名 引用变量名;
  ```

- **方法调用**

  ```
  引用变量名.成员方法名(实参列表);
  ```


### 1.4 方法的传参过程

1. 方法调用时，实参通过max()方法赋值给形参
2. max()方法运行结束后会释放为形参变量开辟的内存空间

### 1.5 关键字

#### 1.5.1 this和super

- this代表当前对象的引用。
  - 使用this.的方式可以访问本类的成员。
  - 使用this()的方式在构造方法的第一行表示调用本类中的其他构造方法。
- super代表父类的存储空间标识(可以理解为父亲的引用)。
  - 使用super.的方式可以访问父类的成员。
  - 使用super()的方式在构造方法的第一行表示调用父类的构造方法。

#### 1.5.2 final关键字

- final修饰类体现在该类不能被继承；
- final修饰方法体现在该方法不能被重写；
- final修饰成员变量体现在该成员变量必须被初始化而且不能更改；

**注意：**

在以后的开发中static和final关键字很少单独使用，通常使用public static final共同修饰表达常量的概念，常量的命名规范是：所有字母大写，不同单词之间使用下划线连接。

#### 1.5.3 static关键字

关于  static 关键字的使用，它可以用来修饰的成员变量和成员方法，被修饰的成员是属于类的，而不是单单是属
于某个对象的。也就是说，既然属于类，就可以不靠创建对象来调用了。

**使用方式**

- **静态变量** ：使用 static关键字修饰的成员变量。
- **静态方法** ：使用 static关键字修饰的成员方法，习惯称为静态方法
  - 静态方法可以直接访问类变量和静态方法。
  - 静态方法 不能直接访问普通成员变量或成员方法。反之，成员方法可以直接访问类变量或静态方法。
  - 静态方法中，不能使用 this关键字
- **静态代码块** ：定义在成员位置，使用static修饰的代码块{ }。
- **静态内部类**：使用static修饰的内部类

> 小贴士：静态方法只能访问静态成员。
>
> static 关键字，可以修饰变量、方法和代码块。在使用的过程中，其主要目的还是想在不创建对象的情况
> 下，去调用方法。

### 1.6 抽象类

- **抽象类**：是指不能具体实现的类，也就是该类不能具体实例化对象，使用abstract进行修饰。
- **抽象方法**：是指不能具体实现的方法，也就是该方法没有方法体。抽象方法必须被子类重写。

**注意**

1、抽象类可有成员变量、成员方法、构造方法

2、抽象类可有可无抽象方法

3、拥有抽象方法的类，必须是抽象类

**抽象类的意义**

抽象类的意义在于被继承，继承的抽象方法必须被重写，抽象类具有规范性和强制性

### 1.7 接口

接口，是Java语言中一种引用类型，是方法的集合，如果说类的内部封装了成员变量、构造方法和成员方法，那么
接口的内部主要就是封装了方法，包含抽象方法（`JDK7`及以前），默认方法和静态方法（`JDK8`），私有方法（`JDK9`）。

- **成员变量**：都是由public static final共同修饰，表示为常量，常量的字母全部大写
- **抽象方法**：使用 abstract 关键字修饰，可以省略，没有方法体。该方法供子类实现使用。
- **默认方法**：使用  default 修饰，不可省略，供子类调用或者子类重写。
- **静态方法**：使用  static 修饰，供接口直接调用。
  - 静态方法无法重写和继承，只能通过接口名的方式调用
- **私有方法**：使用  private 修饰，供接口中的默认方法或者静态方法调用。
  - 私有方法：只有默认方法可以调用。
  - 私有静态方法：默认方法和静态方法可以调用。

### 1.8 枚举示例

```java
/**
 * @description: 枚举常量由相当的优势相对于类常量(项目中推荐优先使用枚举常量)，
 * 对于数据量较少的多个选项，也建议使用枚举，不把数据放在数据库，能够降低与数据库耦合
 * @Author: yim
 * @Date: 2018/11/2 14:06
 **/
public enum OvlsConstant {

    LOGIN_SUCCESS(1,"登陆成功"),
    REGIST_SUCCESS(2,"注册成功"),
    INSERT_SUCCESS(3,"增加成功"),
    DELETE_SUCCESS(4,"删除成功"),
    UPDATE_SUCCESS(5,"修改成功"),
    QUERY_SUCCESS(6,"查询成功"),
    TOKEN_OK(7,"令牌合法"),
    TOKEN_ERROR(8,"令牌非法"),
    USER_EXISTS(9,"用户已存在"),
    USER_NO_EXISTS(10,"用户不存在"),
    PASSWORD_ERROR(11,"密码错误"),
    SYSTEM_ERROR(12,"系统异常");

    private int num;
    private String msg;

    private OvlsConstant(int num,String msg){
        this.num = num;
        this.msg = msg;
    }

    public int getNum() {
        return num;
    }

    public String getMsg() {
        return msg;
    }

    public static OvlsConstant getMsgByNum(int num){
        for (OvlsConstant oc: values() ) {
            if (oc.getNum() == num) {
                return oc;
            }
        }
        return null;
    }
}
```
### 1.9 内部类

直接定义在类内部的类，内部类可以直接访问外部类的成员变量和方法，包含私有的成员变量和方法

#### 1.9.1 内部类和外部类的区别

- 外部类和外部类之间是并列关系
- 外部类和内部类之间是包含关系
- 内部类可以直接访问外部类的成员，外部类要访问内部类的成员，必须要建立内部类的对象。
- 内部类可以用private、static修饰，外部类不能

#### 1.9.2 内部类的分类

- **普通内部类** ：直接将一个类的定义放在另外一个类的内部。

- **静态内部类** ：使用static关键字修饰的内部类。

  - `jvm`类加载优先级高于外部类的成员变量成员方法
  - 在外部类加载就内部类就被加载

- **匿名内部类** -：是内部类的简化写法。它的本质是一个 带具体实现的 父类或者父接口的 匿名的 子类对象。
  开发中，最常用到的内部类就是匿名内部类了

  - 匿名内部类必须继承一个父类或者实现一个父接口。

    ```
    new 父类名或者接口名(){
        // 方法重写
        @Override
        public void method() {
            // 执行语句
        }
    };
    ```

## 二 面向对象三大特征

### 2.1 封装

#### 2.1.1 封装步骤

1. 使用private修饰成员变量
2. 对外提供公有的get和set方法

####  2.1.2 标准代码——JavaBean

JavaBean 是 Java语言编写类的一种标准规范。符合 JavaBean 的类，要求类必须是具体的和公共的，并且具有无
参数的构造方法，提供用来操作成员变量的 set 和 get 方法。

**规范如下：**

```java
public class Student {
    /**
     * 成员变量
     */
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

### 2.2 继承

子类继承父类的属性和行为，使得子类对象具有与父类相同的属性、相同的行为。子类可以直接访问父类中的非私有的属性和行为。

**继承特点**

- 子类可以继承父类非私有的成员变量和成员方法。
- 子类无法继承父类的构造方法，但是可以使用 super()的方式调用父类的构造方法。
- Java中的继承是单继承，但是可以是实现多重继承
- 子类可以通过重写（overrider）的方式，实现父类功能的扩展

### 2.3 多态

**多态** ： 是指同一行为，具有多个不同表现形式。

**多态的表现**

```
父类类型 变量名 = new 子类对象；
变量名.方法名();
```

> 分类的引用指向子类的对象

实际开发的过程中，父类类型作为方法形式参数，传递子类对象给方法，进行方法的调用，更能体现出多态的扩展
性与便利。

## 三 真题汇总

1. 简述一下面向对象及其三大特征？
2. 重载和重写？
3. final、finally、finalize对比？
4. static关键字
5. 能否从静态方法发出对非静态方法的访问？
6. 访问控制符
7. 对象创建的过程
8. 抽象类和接口
9. 值传递和引用传递，Java中参数传递的方式？
11. 静态内部和内部类区别？